!function(a,b){"object"==typeof exports?module.exports=b():"function"==typeof define&&define.amd?define(b):a.drag=b()}(this,function(){function a(b,c){function d(b){var c=g(b["class"]||"",b.parent),d=g("pointer",c);return g("shape shape1",d),g("shape shape2",d),g("bg bg1",c),g("bg bg2",c),a(c,f(b.cbs,d)),{background:c,pointer:d}}function e(b){var c=g(b["class"],b.parent),d=g("pointer",c);return g("shape",d),g("bg",c),a(c,f(b.cbs,d)),{background:c,pointer:d}}function f(a,b){function c(a){return function(c){c.pointer=b,a(c)}}var d={};for(var e in a)d[e]=c(a[e]);return d}function g(a,b){return h("div",a,b)}function h(a,b,c){var d=document.createElement(a);return b&&(d.className=b),c.appendChild(d),d}function i(){return"undefined"!=typeof window.ontouchstart}function j(a,b,c,d,e){var f=!1;b=m(b);var g=b.begin,h=b.change,i=b.end;k(a,c,function(b){function c(){f=!1,l(document,d,j),l(document,e,c),p(i,a,b)}f=!0;var j=q(p,h,a);k(document,d,j),k(document,e,c),p(g,a,b)})}function k(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&a.attachEvent("on"+b,c)}function l(a,b,c){a.removeEventListener?a.removeEventListener(b,c,!1):a.detachEvent&&a.detachEvent("on"+b,c)}function m(a){if(a)return{begin:a.begin||o,change:a.change||o,end:a.end||o};var b,c;return{begin:function(a){b={x:a.elem.offsetLeft,y:a.elem.offsetTop},c=a.cursor},change:function(a){n(a.elem,"left",b.x+a.cursor.x-c.x+"px"),n(a.elem,"top",b.y+a.cursor.y-c.y+"px")},end:o}}function n(a,b,c){a.style[b]=c}function o(){}function p(a,b,c){c.preventDefault();var d=r(b),e=b.clientWidth,f=b.clientHeight,g={x:s(b,c),y:t(b,c)},h=(g.x-d.x)/e,i=(g.y-d.y)/f;a({x:isNaN(h)?0:h,y:isNaN(i)?0:i,cursor:g,elem:b,e:c})}function q(a){var b=Array.prototype.slice,c=b.apply(arguments,[1]);return function(){return a.apply(null,c.concat(b.apply(arguments)))}}function r(a){var b=0,c=0;if(a.offsetParent)do b+=a.offsetLeft,c+=a.offsetTop;while(a=a.offsetParent);return{x:b,y:c}}function s(a,b){if(v(a)){var c=parseInt(w(document.body,"marginLeft"),10)-u(a,"scrollLeft")+window.pageXOffset+a.style.marginLeft;return b.clientX-c}return b.pageX?b.pageX:b.clientX?b.clientX+document.body.scrollLeft:void 0}function t(a,b){if(v(a)){var c=parseInt(w(document.body,"marginTop"),10)-u(a,"scrollTop")+window.pageYOffset+a.style.marginTop;return b.clientY-c}return b.pageY?b.pageY:b.clientY?b.clientY+document.body.scrollTop:void 0}function u(a,b){for(var c=0;"HTML"!=a.nodeName;)c+=a[b],a=a.parentNode;return c}function v(a){for(;"HTML"!=a.nodeName&&"fixed"!=x(a,"position");)a=a.parentNode;return"HTML"==a.nodeName?!1:!0}function w(a,b){return a.currentStyle?a.currentStyle[b]:document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(a,"")[b]:a.style[b]}function x(a,b){var c;return c=window.getComputedStyle?window.getComputedStyle(a,null):a.currentStyle,c[b]}return b?(i()?j(b,c,"touchstart","touchmove","touchend"):j(b,c,"mousedown","mousemove","mouseup"),a.xyslider=d,a.slider=e,void 0):(console.warn("drag is missing elem!"),void 0)}return a});